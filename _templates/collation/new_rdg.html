<form action="submit"
    hx-post="{% url 'new-rdg' app_pk=app_pk %}"
    hx-target="#rdgs_table">
    {% comment %} {{ form.as_p }} {% endcomment %}
    {{ form.as_p }}
    <p>
        <label class="vh" for="wits-filter">Filter Witnesses</label>
        <input type="text" id="wits-filter" placeholder="Filter Witnesses"
            _="on keyup if my value == '' show <option/> in #id_wit else if the event's key is 'Escape' set my value to '' trigger keyup else show <option/> in #id_wit when its textContent.startsWith(my value) end">
    </p>
    <button type="submit">
        Submit
    </button>
    <button type="button" 
        hx-get="{% url 'cancel-new-rdg' app_pk=app_pk %}"
        hx-target="#rdgs_table">
        Cancel
    </button>
</form>
<script>
    var selected_witnesses = document.getElementById('id_selected_witnesses');
    // add change event listener to #id_wit
    document.getElementById('id_wit').addEventListener('change', function (event) {
        selected_witnesses.value = ''
        var selectedOptions = event.target.selectedOptions;
        var values = [];
        for (var i = 0; i < selectedOptions.length; i++) {
            values.push(selectedOptions[i].textContent);
        }
        selected_witnesses.value = values.join('. ');
    });
</script>